<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>表格</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/layui2.11/css/layui.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='libs/uiframe/frame/static/css/style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='libs/uiframe/frame/static/image/code.png') }}">
</head>
<body class="body">
<fieldset class="layui-elem-field site-demo-button" style="margin-top: 30px;">
  <legend>用户管理</legend>
  <div>
    <button class="layui-btn layui-btn-normal" id="add_btn"><i class="layui-icon"></i>新增</button>
    <button class="layui-btn layui-btn-normal" id="edit_btn"><i class="layui-icon"></i>编辑</button>
    <button class="layui-btn layui-btn-danger" id="remove_btn"><i class="layui-icon"></i>删除</button>
  </div>
</fieldset>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>用户列表</legend>
</fieldset>

<table id="userlist"></table>
<script type="text/javascript" src="{{ url_for('static', filename='libs/layui2.11/layui.js') }}"></script>
<script type="text/javascript">
layui.use('table', function(){
  var table = layui.table, $ = layui.jquery;
  $.ajax({
      type:'get',
      url:{{ request.script_root|tojson|safe }} + '/sys/userlist',
      dataType: "json",
      contentType:'application/json;charset=utf-8',
      success:function(data) {
        //展示已知数据
        table.render({
            elem: '#userlist'
            ,data: data
            ,height: 272
            ,cols: [[
                {checkbox: true, LAY_CHECKED: false} //默认全选
                ,{field: 'id', title: 'ID', width: 220}
                ,{field: 'username', title: '用户名', width: 320}
                ,{field: 'email', title: '邮箱', width: 350}
            ]]
            ,skin: 'row'
            ,even: true
            ,page: true //是否显示分页
            ,limits: [5, 10, 15]
            ,limit: 5 //每页默认显示的数量
  });
      },
      error: function (error){
        console.log(error);
      }
  });



  $("#add_btn").click(function () {
      alert("add");
  });
  $("#edit_btn").click(function () {
      alert("edit");
  });
  $("#remove_btn").click(function () {
      alert("remove");
  });
});
</script>
</body>
</html>